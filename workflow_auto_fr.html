<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <title>Workflow automation and orchestration at CASD</title>

    <link rel="stylesheet" href="dist/reset.css"/>
    <link rel="stylesheet" href="dist/reveal.css"/>
    <link rel="stylesheet" href="dist/theme/dracula.css"/>
    <style>
        .left-align {
            text-align: left;
        }
    </style>

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css"/>
</head>

<body>
<div class="reveal">
    <div class="slides">
        <!--Slide 1: Overview-->
        <section>
            <section>

                <img src="assets/CASD.png" alt="casd logo" style="
                  height: 250px;
                  margin: 0 auto 4rem auto;
                  background: transparent;
                  -webkit-filter: invert(1);
                  filter: invert(1);
                " class="demo-logo"/>

                <h3>Workflow automation and orchestration at CASD</h3>
                <p>
                    <small>Datascience team</small>
                </p>
            </section>

            <section data-transition="fade-in slide-out">
                <h3>Goals</h3>
                <ul>
                    <li>What is workflow automation and orchestration framework?</li>
                    <li>What are the popular workflow automation tools?</li>
                    <li>How to do metadata management at CASD?</li>
                </ul>
            </section>
        </section>

        <!--Slide 2: What is workflow automation and orchestration framework?-->
        <section data-transition="fade-in slide-out">
            <section>
                <h3>What is workflow automation and orchestration framework?</h3>

                <p>
                    A <em>workflow automation and orchestration framework</em> coordinates multiple
                    tasks(often interdependent) so that complex processes run <span style="font-weight: bold;">reliably, observably, and efficiently without human intervention.</span>
                </p>

                <p>
                <ul>
                    <small>
                        <li class="fragment"><em>Automation</em>: Executes pre-defined tasks automatically (Execution.)
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Orchestration</em>: Ensures multiple automated components run in the
                            right order, with state tracking, error handling, and data passing between them.
                            (Coordination)
                        </li>
                    </small>

                </ul>
                </p>

            </section>

            <section>
                <h3>Key concepts in workflow automation and orchestration framework:</h3>

                <ul>
                    <small>
                        <li class="fragment"><em>Task</em> : The atomic unit of computation (e.g. function, script, or
                            command).
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Flow / DAG </em> : A sequence of tasks, rules, and dependencies
                            designed to achieve a specific outcome. It can be represented as a directed acyclic graph.
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Task Dependency</em> : Orders(e.g. upstream/downstream) and trigger
                            conditions between tasks.
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Scheduling and Triggers</em> : Decides when to start flows (e.g. time,
                            event, manual).
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Executor / Worker</em> : Executes tasks on designated
                            infrastructure(e.g. local, Docker, cluster).
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Task State Management</em> : Tracks states of each task(e.g. running,
                            success, retry, fail, cancel).
                        </li>
                    </small>
                    <small>
                        <li class="fragment"><em>Logger</em> : Records logs, metrics, and events for task monitoring and
                            debugging.
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Error Handling and retry</em> : Handle failed tasks(e.g. retry, ignore,
                            stop, etc.).
                        </li>
                    </small>
                </ul>

                <aside class="notes">

                </aside>
            </section>
            <section>
                <h3>Automation VS Orchestration</h3>


                <h4>Automation:</h4>
                <ul>
                    <li class="fragment"><em>Scope</em> : Focus on a single task</li>
                    <li class="fragment"><em>Goal</em> : To avoid manual execution</li>
                    <li class="fragment"><em>Example</em> : User needs to run a spark job daily to analyze logs</li>
                </ul>


                <h4>Orchestration:</h4>
                <ul>
                    <li class="fragment"><em>Scope</em> : Focus on multiple tasks and their orders, dependencies
                    </li>
                    <li class="fragment"><em>Goal</em> : Ensure end-to-end workflow consistency</li>
                    <li class="fragment"><em>Example</em> : Run extract → transform → validate → load tasks, in
                        sequence
                    </li>
                </ul>

            </section>

        </section>

        <!--Slide 3: advantage and disadvantage-->
        <section data-transition="fade-in slide-out">
            <!--Slide 3-1: Advantages -->
            <section>
                <h3>Advantages of workflow automation</h3>


                <ul>

                    <small>
                        <li class="fragment"><em>Reliability</em> : Automated workflow execution, recovery and retries
                            reduce manual work and human error
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Reproducibility</em> : A complete workflow contains all details(e.g.
                            scripts, input data, parameters, etc.) for a rerun.
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Auditability</em> : All historical output of workflow runs are logged
                            which allow users to audit the workflow.
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Maintainability</em> : Modular tasks make unit testing easier, reusable
                            tasks avoid code duplication.
                        </li>
                    </small>

                    <small>
                        <li class="fragment"><em>Scalability</em> : Multiple workers allow parallel task execution.
                        </li>
                    </small>

                </ul>

            </section>
            <!--Slide 3-2: disadvantage-->
            <section>
                <h3>Disadvantages of workflow automation:</h3>

                <ul>

                    <li class="fragment"><em>Extra operational complexity</em> : Need to deploy and maintain new tools
                        for automation and orchestration
                    </li>

                    <li class="fragment"><em>Extra learning time</em> : Users need to learn how to develop and run
                        workflow in specific tools (e.g. Prefect, airflow, etc.)
                    </li>

                    <li class="fragment"><em>Extra infrastructure overhead</em> : Orchestration tools require many
                        components (e.g. api server, worker, scheduler, etc) to run constantly.
                    </li>


                </ul>
            </section>
        </section>

        <!--Slide 4: Existing tools -->

        <section>
            <section>
                <h3>Existing workflow automation and orchestration tools(1)</h3>
                <ul>

                    <li class="fragment"><a href="https://airflow.apache.org/">Airflow</a> : Works on all types of infra
                        (e.g. bare-metal, VMs and containers), very mature solution, large user base, provide many
                        operators(e.g. bash,
                        python, sql, etc.). Only works on linux OS.
                    </li>
                    <li class="fragment"><a href="https://www.prefect.io/">Prefect</a> : Python centric, modern UI,
                        cross-platform
                    </li>
                    <li class="fragment"><a href="https://dagster.io/">Dagster</a> : Data centric orchestrator, provide
                        best support for unit testing.
                    </li>


                </ul>
            </section>

            <section>
                <h3>Existing workflow automation and orchestration tools(2)</h3>
                <ul>

                    <li class="fragment"><a href="https://github.com/spotify/luigi">Luigi</a> : Easy to install as
                        python a package, Lightweight scheduling, suitable for small and median workflow.
                    </li>
                    <li class="fragment"><a href="https://argoproj.github.io/workflows/">Argo Workflow</a> : Use yaml
                        for workflow definition, Kubernetes-native(and only works on k8s)
                    </li>
                    <li class="fragment"><a href="https://www.mage.ai/data">Mage</a> : Very powerful tool with AI
                        assistance, but requires License
                    </li>

                </ul>
            </section>


        </section>

        <!--Slide 5: workflow automation framework in CASD-->
        <section data-transition="fade-in slide-out">
            <!-- Slide 5-1: General steps for using a workflow automation framework -->
            <section>
                <h3>Workflow automation and orchestration in CASD</h3>
                <p>
                    <em>CASD</em> proposes two workflow automation tools: <span
                        style="font-weight: bold;">Prefect</span> and <span style="font-weight: bold;">Airflow</span>

                </p>
                <ul>
                    <li class="fragment"><a href="https://airflow.apache.org/">Airflow</a> : For linux servers, and
                        complex
                        workflow which requires operator other than python (e.g. sql, bash, etc.).
                    </li>
                    <li class="fragment"><a href="https://www.prefect.io/">Prefect</a> : For Windows servers, python
                        centric workflow
                    </li>
                </ul>

            </section>

        </section>


        <!--Slide 5: Metadata management tools-->
        <section>
            <section>
                <h3>Workflow automation and orchestration in practice</h3>

                <ul>
                    <small>
                    <li class="fragment"><em>Setup prefect working environment</em> : Configure a virtual environment, install prefect client, connect to a server, specify your first workflow
                    </li></small>

                    <small><li class="fragment"><em>Work pool and worker management</em> : Learn how to create and configure work-pool and worker
                    </li></small>

                    <small><li class="fragment"><em>Workflow management</em> : Learn how to define tasks and workflow
                    </li></small>

                    <small><li class="fragment"><em>Deployment management</em> : Learn how to define a deployment in prefect
                    </li></small>

                     <small><li class="fragment"><em>Run spark in Prefect</em> : Learn how to run spark in Prefect and best practices
                    </li></small>

                     <small><li class="fragment"><em>Compare with airflow</em> : Compare what we have learned from prefect with airflow
                    </li></small>


                </ul>
            </section>
        </section>


    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
    });
</script>
</body>

</html>